<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEST FINAL - Verificaci√≥n de Logos Completa</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            margin: 0;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .status-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid transparent;
        }
        .status-card.success {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }
        .status-card.error {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.1);
        }
        .status-card.warning {
            border-color: #ffaa00;
            background: rgba(255, 170, 0, 0.1);
        }
        .script-order {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .script-order ol {
            margin: 0;
            padding-left: 20px;
        }
        .script-order li {
            padding: 5px 0;
            border-left: 3px solid #00ff88;
            padding-left: 10px;
            margin: 5px 0;
        }
        #carousel-test {
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
        }
        .logo-count {
            font-size: 2em;
            font-weight: bold;
            text-align: center;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
        }
        .success-count {
            background: linear-gradient(45deg, #00ff88, #00cc66);
            color: #003311;
        }
        .error-count {
            background: linear-gradient(45deg, #ff4444, #cc0000);
            color: white;
        }
        .function-test {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #00ff88;
        }
        pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 12px;
        }
        .refresh-btn {
            background: linear-gradient(45deg, #00ff88, #00cc66);
            color: #003311;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
        }
        .refresh-btn:hover {
            transform: scale(1.05);
            transition: transform 0.2s;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîç TEST FINAL - Verificaci√≥n Completa de Logos</h1>
        <p><strong>Prop√≥sito:</strong> Verificar que TODOS los logos de redes sociales se muestran correctamente despu√©s de la correcci√≥n del orden de scripts.</p>
        
        <button class="refresh-btn" onclick="location.reload()">üîÑ Actualizar Test</button>
        
        <div class="status-grid">
            <div class="status-card" id="script-status">
                <h3>üìã Estado de Scripts</h3>
                <div id="script-results"></div>
            </div>
            
            <div class="status-card" id="carousel-status">
                <h3>üé† Estado del Carrusel</h3>
                <div id="carousel-results"></div>
            </div>
            
            <div class="status-card" id="function-status">
                <h3>‚öôÔ∏è Estado de Funciones</h3>
                <div id="function-results"></div>
            </div>
            
            <div class="status-card" id="logo-status">
                <h3>üé® Estado de Logos</h3>
                <div id="logo-results"></div>
            </div>
        </div>
        
        <div class="script-order">
            <h3>üìú Orden de Scripts Correcto:</h3>
            <ol>
                <li>simple-bypass.js</li>
                <li>js/copywriting-init.js</li>
                <li><strong>js/simple-social-carousel.js</strong> ‚≠ê (ANTES de new-structure.js)</li>
                <li>js/new-structure.js</li>
                <li>js/main.js</li>
                <li>js/autocorrector.js</li>
                <li>debug-helpers.js</li>
            </ol>
        </div>
        
        <div id="carousel-test">
            <h3>üé† Test del Carrusel en Vivo:</h3>
            <!-- Copiamos exactamente el HTML del index.html -->
            <div id="social-network-selector" style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                <!-- El carrusel se insertar√° aqu√≠ -->
            </div>
        </div>
        
        <div class="logo-count" id="logo-count">
            Contando logos...
        </div>
        
        <div class="function-test">
            <h4>üîß Test de Funci√≥n getSelectedSocialNetwork():</h4>
            <div id="function-test-results"></div>
        </div>
        
        <div id="detailed-results">
            <h3>üìä Resultados Detallados:</h3>
            <pre id="detailed-log"></pre>
        </div>
    </div>

    <!-- Cargamos los scripts en el MISMO orden que index.html -->
    <script src="simple-bypass.js"></script>
    <script src="js/copywriting-init.js"></script>
    <script src="js/simple-social-carousel.js"></script>
    <script src="js/new-structure.js"></script>
    <script type="module" src="js/main.js"></script>
    <script src="js/autocorrector.js"></script>
    <script src="debug-helpers.js"></script>

    <script>
        let testResults = [];
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            testResults.push(`[${timestamp}] ${type.toUpperCase()}: ${message}`);
            console.log(`[${timestamp}] ${type.toUpperCase()}: ${message}`);
            updateDetailedLog();
        }
        
        function updateDetailedLog() {
            document.getElementById('detailed-log').textContent = testResults.join('\n');
        }
        
        function updateStatusCard(cardId, status, content) {
            const card = document.getElementById(cardId);
            card.className = `status-card ${status}`;
            card.querySelector('div').innerHTML = content;
        }
        
        function testScriptLoading() {
            log('Iniciando test de carga de scripts...');
            
            const scripts = [
                'SimpleSocialCarousel',
                'getSelectedSocialNetwork'
            ];
            
            let loadedScripts = [];
            let missingScripts = [];
            
            scripts.forEach(script => {
                if (typeof window[script] !== 'undefined') {
                    loadedScripts.push(script);
                    log(`‚úÖ Script cargado: ${script}`, 'success');
                } else {
                    missingScripts.push(script);
                    log(`‚ùå Script NO cargado: ${script}`, 'error');
                }
            });
            
            const status = missingScripts.length === 0 ? 'success' : 'error';
            const content = `
                <p><strong>Cargados:</strong> ${loadedScripts.length}</p>
                <p><strong>Faltantes:</strong> ${missingScripts.length}</p>
                <p><strong>Estado:</strong> ${status === 'success' ? '‚úÖ TODOS CARGADOS' : '‚ùå FALTAN SCRIPTS'}</p>
                ${missingScripts.length > 0 ? `<p><strong>Faltantes:</strong> ${missingScripts.join(', ')}</p>` : ''}
            `;
            
            updateStatusCard('script-status', status, content);
            return status === 'success';
        }
        
        function testCarouselInitialization() {
            log('Iniciando test de inicializaci√≥n del carrusel...');
            
            try {
                if (typeof SimpleSocialCarousel !== 'undefined') {
                    const carousel = new SimpleSocialCarousel();
                    carousel.init();
                    log('‚úÖ Carrusel inicializado correctamente', 'success');
                    
                    updateStatusCard('carousel-status', 'success', `
                        <p>‚úÖ SimpleSocialCarousel disponible</p>
                        <p>‚úÖ Inicializaci√≥n exitosa</p>
                        <p>‚úÖ Carrusel funcionando</p>
                    `);
                    return true;
                } else {
                    log('‚ùå SimpleSocialCarousel no est√° disponible', 'error');
                    updateStatusCard('carousel-status', 'error', `
                        <p>‚ùå SimpleSocialCarousel NO disponible</p>
                        <p>‚ùå No se puede inicializar</p>
                    `);
                    return false;
                }
            } catch (error) {
                log(`‚ùå Error al inicializar carrusel: ${error.message}`, 'error');
                updateStatusCard('carousel-status', 'error', `
                    <p>‚ùå Error de inicializaci√≥n</p>
                    <p>Error: ${error.message}</p>
                `);
                return false;
            }
        }
        
        function testFunctionAvailability() {
            log('Iniciando test de disponibilidad de funciones...');
            
            const functions = [
                'getSelectedSocialNetwork',
                'SimpleSocialCarousel'
            ];
            
            let availableFunctions = [];
            let missingFunctions = [];
            
            functions.forEach(func => {
                if (typeof window[func] !== 'undefined') {
                    availableFunctions.push(func);
                    log(`‚úÖ Funci√≥n disponible: ${func}`, 'success');
                } else {
                    missingFunctions.push(func);
                    log(`‚ùå Funci√≥n NO disponible: ${func}`, 'error');
                }
            });
            
            // Test espec√≠fico de getSelectedSocialNetwork
            try {
                if (typeof getSelectedSocialNetwork === 'function') {
                    const testResult = getSelectedSocialNetwork();
                    log(`‚úÖ getSelectedSocialNetwork() ejecutada: ${testResult}`, 'success');
                } else {
                    log('‚ùå getSelectedSocialNetwork no es una funci√≥n', 'error');
                }
            } catch (error) {
                log(`‚ùå Error al ejecutar getSelectedSocialNetwork: ${error.message}`, 'error');
            }
            
            const status = missingFunctions.length === 0 ? 'success' : 'error';
            const content = `
                <p><strong>Disponibles:</strong> ${availableFunctions.length}</p>
                <p><strong>Faltantes:</strong> ${missingFunctions.length}</p>
                <div id="function-test-results">
                    ${availableFunctions.map(func => `<p>‚úÖ ${func}</p>`).join('')}
                    ${missingFunctions.map(func => `<p>‚ùå ${func}</p>`).join('')}
                </div>
            `;
            
            updateStatusCard('function-status', status, content);
            return status === 'success';
        }
        
        function countLogos() {
            log('Iniciando conteo de logos...');
            
            // Esperamos un poco para que el carrusel se inicialice
            setTimeout(() => {
                const svgElements = document.querySelectorAll('#social-network-selector svg');
                const socialItems = document.querySelectorAll('#social-network-selector .social-item');
                const carouselContainer = document.querySelector('#social-network-selector .simple-social-carousel');
                
                log(`SVG encontrados: ${svgElements.length}`);
                log(`Social items encontrados: ${socialItems.length}`);
                log(`Contenedor carousel encontrado: ${carouselContainer ? 'S√ç' : 'NO'}`);
                
                const logoCount = Math.max(svgElements.length, socialItems.length);
                const expectedLogos = 9; // Facebook, Instagram, LinkedIn, X, TikTok, WhatsApp, Telegram, YouTube, Reddit
                
                const logoCountElement = document.getElementById('logo-count');
                
                if (logoCount >= expectedLogos) {
                    logoCountElement.className = 'logo-count success-count';
                    logoCountElement.innerHTML = `‚úÖ ${logoCount}/${expectedLogos} LOGOS DETECTADOS`;
                    log(`‚úÖ Logos detectados correctamente: ${logoCount}/${expectedLogos}`, 'success');
                    
                    updateStatusCard('logo-status', 'success', `
                        <p>‚úÖ Logos encontrados: ${logoCount}</p>
                        <p>‚úÖ SVG elements: ${svgElements.length}</p>
                        <p>‚úÖ Social items: ${socialItems.length}</p>
                        <p>‚úÖ Carrusel: ${carouselContainer ? 'Presente' : 'Ausente'}</p>
                    `);
                } else {
                    logoCountElement.className = 'logo-count error-count';
                    logoCountElement.innerHTML = `‚ùå ${logoCount}/${expectedLogos} LOGOS DETECTADOS`;
                    log(`‚ùå Logos insuficientes: ${logoCount}/${expectedLogos}`, 'error');
                    
                    updateStatusCard('logo-status', 'error', `
                        <p>‚ùå Logos encontrados: ${logoCount}</p>
                        <p>‚ùå SVG elements: ${svgElements.length}</p>
                        <p>‚ùå Social items: ${socialItems.length}</p>
                        <p>‚ùå Carrusel: ${carouselContainer ? 'Presente' : 'Ausente'}</p>
                    `);
                }
                
                // Listamos los logos espec√≠ficos encontrados
                svgElements.forEach((svg, index) => {
                    const parentItem = svg.closest('.social-item');
                    const network = parentItem ? parentItem.dataset.network : 'desconocido';
                    log(`Logo ${index + 1}: ${network}`, 'info');
                });
                
            }, 2000); // Esperamos 2 segundos para que todo se inicialice
        }
        
        function runAllTests() {
            log('üöÄ Iniciando TEST FINAL COMPLETO...', 'info');
            log('='.repeat(50), 'info');
            
            // Test 1: Scripts
            const scriptsOk = testScriptLoading();
            
            // Test 2: Carrusel
            setTimeout(() => {
                const carouselOk = testCarouselInitialization();
                
                // Test 3: Funciones
                setTimeout(() => {
                    const functionsOk = testFunctionAvailability();
                    
                    // Test 4: Logos
                    countLogos();
                    
                    // Resumen final
                    setTimeout(() => {
                        log('='.repeat(50), 'info');
                        log('üìã RESUMEN FINAL:', 'info');
                        log(`Scripts: ${scriptsOk ? '‚úÖ OK' : '‚ùå FALLO'}`, scriptsOk ? 'success' : 'error');
                        log(`Carrusel: ${carouselOk ? '‚úÖ OK' : '‚ùå FALLO'}`, carouselOk ? 'success' : 'error');
                        log(`Funciones: ${functionsOk ? '‚úÖ OK' : '‚ùå FALLO'}`, functionsOk ? 'success' : 'error');
                        log('='.repeat(50), 'info');
                        
                        if (scriptsOk && carouselOk && functionsOk) {
                            log('üéâ TODOS LOS TESTS PASARON - LOGOS DEBEN ESTAR VISIBLES', 'success');
                        } else {
                            log('‚ö†Ô∏è ALGUNOS TESTS FALLARON - REVISAR ERRORES', 'error');
                        }
                    }, 3000);
                }, 1000);
            }, 500);
        }
        
        // Ejecutar tests cuando la p√°gina est√© lista
        document.addEventListener('DOMContentLoaded', () => {
            log('‚úÖ DOM cargado, iniciando tests...', 'info');
            runAllTests();
        });
        
        // Tambi√©n ejecutar despu√©s de que todos los scripts se hayan cargado
        window.addEventListener('load', () => {
            log('‚úÖ P√°gina completamente cargada', 'info');
        });
    </script>
</body>
</html>
